<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KNOW YOUR SELF | ä½ çš„å†…å¿ƒç§©åº</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Noto+Serif+SC:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* --- 1. æ ¸å¿ƒå˜é‡ (Design Tokens) --- */
        :root {
            --bg-color: #F9F8F4; /* æ¸©æš–çš„ç±³çº¸è‰² */
            --text-primary: #111111; /* ææ·±çš„ç‚­é»‘ */
            --text-secondary: #555555; /* ä¸­ç° */
            --text-meta: #888888; /* æµ…ç° */
            --accent-gold: #C5A059; /* æš—é‡‘ */
            --line-color: #E0E0E0; /* åˆ†å‰²çº¿é¢œè‰² */
            
            --font-display: 'Playfair Display', serif; /* è‹±æ–‡è¡¬çº¿æ ‡é¢˜ */
            --font-body: 'Noto Serif SC', serif; /* ä¸­æ–‡å®‹ä½“ */
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

        body {
            font-family: var(--font-body);
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.8;
            padding: 80px 20px;
            max-width: 900px;
            margin: 0 auto;
        }

        /* --- 2. å¤´éƒ¨è®¾è®¡ (Header) --- */
        header {
            text-align: center;
            margin-bottom: 100px;
            animation: fadeIn 1.2s ease;
        }

        h1 {
            font-family: var(--font-display), serif;
            font-size: 4rem; 
            font-weight: 700;
            letter-spacing: -1px;
            text-transform: uppercase;
            margin-bottom: 30px;
            color: #000;
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 60px; /* ä¸¤ä¸ªé€‰é¡¹æ—¶å¢åŠ ä¸€ç‚¹é—´è·ï¼Œæ›´æ˜¾å¤§æ°” */
            font-family: var(--font-display); 
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-meta);
        }

        .nav-links span { 
            cursor: pointer; 
            position: relative;
            padding-bottom: 5px;
            transition: 0.3s; 
        }
        
        .nav-links span::after {
            content: '';
            position: absolute;
            width: 0;
            height: 1px;
            bottom: 0;
            left: 0;
            background-color: #000;
            transition: width 0.3s;
        }
        
        .nav-links span:hover { color: #000; }
        .nav-links span:hover::after { width: 100%; }
        
        .nav-links span.active { color: #000; font-weight: 700; }
        .nav-links span.active::after { width: 100%; }

        /* --- 3. æ¯æ—¥é‡‘å¥ (Daily Quote) --- */
        .quote-section {
            text-align: center;
            margin-bottom: 100px;
            padding: 0 5%;
            border-top: 1px solid var(--line-color);
            border-bottom: 1px solid var(--line-color);
            padding: 40px 0;
        }
        .quote-cn { font-size: 1.1rem; margin-bottom: 8px; color: var(--text-primary); }
        .quote-en { font-family: var(--font-display); color: var(--text-meta); font-style: italic; font-size: 0.95rem;}

        /* --- 4. è®°å½•åŒºåŸŸ (Write Section) --- */
        #writeSection { display: block; opacity: 1; transition: opacity 0.5s; max-width: 700px; margin: 0 auto; }
        
        .input-group {
            margin-bottom: 70px;
        }

        .input-label {
            font-family: var(--font-display);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-meta);
            margin-bottom: 15px;
            display: block;
        }

        .input-title {
            font-size: 1.6rem;
            font-weight: 400; 
            margin-bottom: 25px;
            color: var(--text-primary);
        }

        textarea {
            width: 100%;
            border: none;
            background: transparent;
            font-family: var(--font-body);
            font-size: 1.15rem;
            color: #333;
            min-height: 100px;
            resize: none;
            padding: 0;
            background-image: linear-gradient(transparent 96%, var(--line-color) 96%); 
            background-size: 100% 36px; 
            line-height: 36px;
        }
        textarea::placeholder { color: #CCC; font-weight: 300; font-style: italic;}
        textarea:focus { background-image: linear-gradient(transparent 96%, #999 96%); } 

        /* æƒ…ç»ªé€‰æ‹©å™¨ */
        .mood-selector { display: flex; gap: 30px; margin-top: 20px; font-family: var(--font-display); }
        .mood-text-btn {
            cursor: pointer;
            font-size: 1rem;
            color: var(--text-meta);
            position: relative;
            transition: 0.3s;
            text-transform: capitalize;
            font-style: italic;
        }
        .mood-text-btn:hover { color: #000; }
        .mood-text-btn.selected { color: #000; font-weight: 700; transform: scale(1.1); }
        .mood-text-btn.selected::before { content: 'â€¢'; position: absolute; left: -15px; color: var(--text-primary); }

        /* æäº¤æŒ‰é’® */
        .action-btn {
            background: transparent;
            border: 1px solid #000;
            color: #000;
            padding: 18px 60px;
            font-family: var(--font-display);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            display: block;
            margin: 60px auto 0;
        }
        .action-btn:hover { background-color: #000; color: #fff; }

        /* --- 5. å†å²åˆ—è¡¨åŒºåŸŸ (History Section) --- */
        #historySection { display: none; opacity: 0; transition: opacity 0.5s; max-width: 800px; margin: 0 auto; }

        .history-list { display: flex; flex-direction: column; gap: 0; }

        /* çº¯æ–‡å­—å¡ç‰‡æ ·å¼ */
        .history-card {
            padding: 50px 0;
            border-bottom: 1px solid var(--line-color);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .history-card:first-child { padding-top: 0; }

        .card-meta {
            font-family: var(--font-display);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-meta);
            margin-bottom: 15px;
        }

        .card-title {
            font-family: var(--font-display);
            font-size: 2.8rem; 
            font-weight: 400;
            margin-bottom: 25px;
            color: #000;
            line-height: 1.1;
        }

        .card-preview {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            line-height: 1.8;
            max-width: 90%;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            font-weight: 300;
        }

        .card-link {
            font-family: var(--font-display);
            font-size: 0.75rem;
            text-transform: uppercase;
            text-decoration: underline;
            text-underline-offset: 6px;
            color: #000;
            cursor: pointer;
            letter-spacing: 1px;
            transition: color 0.3s;
        }
        .card-link:hover { color: var(--text-meta); }

        @media (max-width: 768px) {
            h1 { font-size: 2.8rem; }
            body { padding: 40px 20px; }
            .card-title { font-size: 2.2rem; }
            .nav-links { gap: 30px; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .empty-state { text-align: center; color: var(--text-meta); padding: 60px; letter-spacing: 1px; font-family: var(--font-display); font-style: italic; }
    </style>
</head>
<body>

    <header>
        <h1>Know Your Self</h1>
        <nav class="nav-links">
            <span id="tabRecord" class="active" onclick="switchTab('record')">Deep Reads / ä»Šæ—¥ä¹¦å†™</span>
            <span id="tabHistory" onclick="switchTab('history')">Topics / è¿‡å¾€ç¯‡ç« </span>
        </nav>
    </header>

    <div class="quote-section">
        <div class="quote-cn" id="quoteCn">...</div>
        <div class="quote-en" id="quoteEn">...</div>
    </div>

    <main id="writeSection">
        <div class="date-header" style="text-align:center; margin-bottom:50px; color:#999; letter-spacing:2px; font-size:0.8rem; font-family:var(--font-display);" id="currentDate"></div>

        <div class="input-group">
            <span class="input-label">Achievement</span>
            <div class="input-title">å¾®å°æˆå°±</div>
            <textarea id="inputAchievement" placeholder="Type here..."></textarea>
        </div>

        <div class="input-group">
            <span class="input-label">Gratitude</span>
            <div class="input-title">æ„Ÿæ©æ—¶åˆ»</div>
            <textarea id="inputGratitude" placeholder="Type here..."></textarea>
        </div>

        <div class="input-group">
            <span class="input-label">Mood Check-in</span>
            <div class="input-title">æƒ…ç»ªè§‰å¯Ÿ</div>
            
            <div class="mood-selector">
                <div class="mood-text-btn" data-val="Sunny">Sunny</div>
                <div class="mood-text-btn" data-val="Cloudy">Cloudy</div>
                <div class="mood-text-btn" data-val="Rainy">Rainy</div>
                <div class="mood-text-btn" data-val="Storm">Storm</div>
                <div class="mood-text-btn" data-val="Calm">Calm</div>
            </div>

            <textarea id="inputMood" style="margin-top:30px; min-height:80px;" placeholder="Thoughts..."></textarea>
        </div>

        <button class="action-btn" onclick="saveEntry()">Publish to Self</button>
    </main>

    <main id="historySection">
        <div id="historyList" class="history-list">
            </div>
    </main>

    <script>
        // --- 1. åŸºç¡€é…ç½® ---
        const quotes = [
            { cn: "ç”Ÿæ´»å¦‚ä¸€æ¯å’–å•¡ï¼Œå…ˆè‹¦åç”œï¼Œè€Œä½ æ—©å·²å­¦ä¼šå…ˆä¸ºè‡ªå·±æ·»ä¸€å‹ºæ¸©æŸ”çš„ç³–ã€‚", en: "Life is like coffee, bitter then sweet." },
            { cn: "åœ¨å–§åš£çš„ä¸–ç•Œä¸­ï¼Œç‹¬å¤„ä¸æ˜¯éš”ç¦»ï¼Œè€Œæ˜¯ç²¾ç¥çš„å›å½’ã€‚", en: "Solitude is the return of the spirit." },
            { cn: "ä¸‡ç‰©çš†æœ‰è£‚ç—•ï¼Œé‚£æ˜¯å…‰ç…§è¿›æ¥çš„åœ°æ–¹ã€‚", en: "There is a crack in everything, that's how the light gets in." },
            { cn: "ä¿æŒè€å¿ƒï¼Œä¸€åˆ‡ç¾å¥½çš„äº‹ç‰©éƒ½ä¼šç¼“æ…¢è€Œåº„ä¸¥åœ°æˆç†Ÿã€‚", en: "Everything beautiful ripens slowly and solemnly." }
        ];

        // --- 2. åˆå§‹åŒ– ---
        document.addEventListener('DOMContentLoaded', () => {
            // æ—¥æœŸ
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', options).toUpperCase();
            
            // é‡‘å¥
            const quote = quotes[Math.floor(Math.random() * quotes.length)];
            document.getElementById('quoteCn').textContent = quote.cn;
            document.getElementById('quoteEn').textContent = quote.en;

            // æƒ…ç»ªæ–‡å­—ç‚¹å‡»
            document.querySelectorAll('.mood-text-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.mood-text-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                });
            });

            // æ¸²æŸ“å†å²
            renderHistory();
        });

        // --- 3. é¡µé¢åˆ‡æ¢ ---
        function switchTab(tab) {
            const writeSec = document.getElementById('writeSection');
            const histSec = document.getElementById('historySection');
            const tabRec = document.getElementById('tabRecord');
            const tabHist = document.getElementById('tabHistory');

            if (tab === 'record') {
                writeSec.style.display = 'block';
                setTimeout(() => writeSec.style.opacity = 1, 10);
                histSec.style.opacity = 0;
                setTimeout(() => histSec.style.display = 'none', 500);
                
                tabRec.classList.add('active');
                tabHist.classList.remove('active');
            } else {
                histSec.style.display = 'block';
                setTimeout(() => histSec.style.opacity = 1, 10);
                writeSec.style.opacity = 0;
                setTimeout(() => writeSec.style.display = 'none', 500);
                
                tabHist.classList.add('active');
                tabRec.classList.remove('active');
                renderHistory(); 
            }
        }

        // --- 4. ä¿å­˜æ•°æ® ---
        function saveEntry() {
            const achievement = document.getElementById('inputAchievement').value;
            const gratitude = document.getElementById('inputGratitude').value;
            const moodText = document.getElementById('inputMood').value;
            const moodBtn = document.querySelector('.mood-text-btn.selected');
            const moodVal = moodBtn ? moodBtn.getAttribute('data-val') : 'Neutral';

            if (!achievement && !gratitude && !moodText) {
                alert("Please write something to keep the moment.");
                return;
            }

            const d = new Date();
            const dateStr = `${d.getFullYear()}/${(d.getMonth()+1).toString().padStart(2,'0')}/${d.getDate().toString().padStart(2,'0')}`;

            const entry = {
                id: Date.now(),
                dateStr: dateStr, 
                achievement: achievement || "No entry",
                gratitude: gratitude || "No entry",
                moodText: moodText,
                moodVal: moodVal.toUpperCase()
            };

            let history = JSON.parse(localStorage.getItem('inner_peace_history_v2') || "[]");
            history.unshift(entry);
            localStorage.setItem('inner_peace_history_v2', JSON.stringify(history));

            // Reset
            document.getElementById('inputAchievement').value = '';
            document.getElementById('inputGratitude').value = '';
            document.getElementById('inputMood').value = '';
            document.querySelectorAll('.mood-text-btn').forEach(b => b.classList.remove('selected'));

            alert("Published to your inner space.");
            switchTab('history');
        }

        // --- 5. æ¸²æŸ“å†å² ---
        function renderHistory() {
            const listEl = document.getElementById('historyList');
            const history = JSON.parse(localStorage.getItem('inner_peace_history_v2') || "[]");

            listEl.innerHTML = '';

            if (history.length === 0) {
                listEl.innerHTML = '<div class="empty-state">No stories yet. Write your first chapter.</div>';
                return;
            }

            history.forEach(item => {
                let fullContent = [];
                if(item.achievement !== "No entry") fullContent.push(item.achievement);
                if(item.gratitude !== "No entry") fullContent.push(item.gratitude);
                if(item.moodText) fullContent.push(item.moodText);
                
                const previewText = fullContent.length > 0 ? fullContent.join(' ... ') : "Recorded a moment of silence.";

                const cardHtml = `
                    <div class="history-card">
                        <div class="card-meta">HEAL / ${item.dateStr} / ${item.moodVal}</div>
                        <div class="card-title">Inner Self</div>
                        <div class="card-preview">${previewText}</div>
                        <div class="card-link" onclick="alert('ğŸŒŸ ACHIEVEMENT:\\n${item.achievement}\\n\\nğŸ‹ GRATITUDE:\\n${item.gratitude}\\n\\nâ˜ï¸ THOUGHTS:\\n${item.moodText || '...' }')">READ THE STORY</div>
                    </div>
                `;
                listEl.insertAdjacentHTML('beforeend', cardHtml);
            });
        }
    </script>
</body>
</html>
